package org.jomaveger.lang;

// TestSerializableEmployee

import java.io.*;
public interface DeepCloneable extends Serializable {
	static <T extends Serializable> T deepCopy(T t) throws IOException, ClassNotFoundException {
		ByteArrayOutputStream bos = new ByteArrayOutputStream();
		serializeToOutputStream(t, bos);
		byte[] bytes = bos.toByteArray();
		ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bytes));
		return (T) ois.readObject();
	}
	static void serializeToOutputStream(Serializable ser, OutputStream os) throws IOException{
		ObjectOutputStream oos = null;
		try {
			oos = new ObjectOutputStream(os);
			oos.writeObject(ser);
			oos.flush();
		} finally {
			oos.close();
		}
	}
}

